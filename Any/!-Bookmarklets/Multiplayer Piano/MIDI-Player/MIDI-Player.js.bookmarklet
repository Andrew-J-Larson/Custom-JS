javascript:(function()%7Bconst%20NAME%3D%22Multiplayer%20Piano%20-%20MIDI%20Player%22%2CNAMESPACE%3D%22https%3A%2F%2Fandrew-j-larson.github.io%2F%22%2CVERSION%3D%223.9.99%22%2CDESCRIPTION%3D%22Plays%20MIDI%20files!%22%2CAUTHOR%3D%22Andrew%20Larson%22%2CLICENSE%3D%22GPL-3.0-or-later%22%2CINCLUDE%3D%5B%2F%5Ehttps%3F%3A%5C%2F%5C%2F(%5B%5E%2F.%5D%2B%5C.)%3Fmultiplayerpiano%5C.(org%7Cdev%7Cnet%7Ccom).*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2Fmpp%5C.hri7566%5C.info.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2Fmpp%5C.autoplayer%5C.xyz.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2Fmpp%5C.lapishusky%5C.dev.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2Fmpp%5C.yourfriend%5C.lv.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2Fmpp%5C.l3m0ncao%5C.wtf.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2Fmpp%5C.terrium%5C.net.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2Fmpp%5C.hyye%5C.tk.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2Fmpp%5C.totalh%5C.net.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2Fmpp%5C.meowbin%5C.com.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2Fmppfork%5C.netlify%5C.app.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2Fbetter%5C.mppclone%5C.me.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2F(%5B%5E%2F.%5D%2B%5C.)%3Fopenmpp%5C.tk.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2F(%5B%5E%2F.%5D%2B%5C.)%3Fmppkinda%5C.com.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2F(%5B%5E%2F.%5D%2B%5C.)%3Faugustberchelmann%5C.com%5C%2Fpiano%5C%2F.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2Fpiano%5C.ourworldofpixels%5C.com.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2Fbeta%5C-mpp%5C.csys64%5C.com.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2Ffleetway-mpp%5C.glitch%5C.me.*%2Fg%2C%2F%5Ehttps%3F%3A%5C%2F%5C%2F(%5B%5E%2F.%5D%2B%5C.)%3Fmppclone%5C.com.*%2Fg%5D%2CSUPPORT_URL%3D%22https%3A%2F%2Fgithub.com%2FAndrew-J-Larson%2FCustom-JS%2Ftree%2Fmain%2F!-User-Scripts%2FMultiplayer%2520Piano%2FMIDI-Player%22%2CUPDATE_URL%3D%22https%3A%2F%2Fraw.githubusercontent.com%2FAndrew-J-Larson%2FCustom-JS%2Fmain%2F!-User-Scripts%2FMultiplayer%2520Piano%2FMIDI-Player%2FMIDI-Player.user.js%22%2CLatestMIDIPlayerJS_URL%3D%22https%3A%2F%2Fapi.github.com%2Frepos%2Fgrimmdude%2FMidiPlayerJS%2Freleases%2Flatest%22%3Blet%20checkingURL%2CMPP%3Dwindow.MPP%2CcurrentURL%3Dwindow.location.href%2CvalidWebsite%3D!1%3Bfor(checkingURL%3D0%3BcheckingURL%3CINCLUDE.length%3BcheckingURL%2B%2B)currentURL.match(INCLUDE%5BcheckingURL%5D)%26%26(validWebsite%3D!0)%3Bif(!validWebsite)throw%22Not%20on%20the%20Multiplayer%20Piano%20website%2C%20or%20compatible%20clone.%22%3Blet%20stringLatestMIDIPlayerJS%3D%22%22%2CrequestLatestMPJS%3Dnew%20XMLHttpRequest%3Bif(requestLatestMPJS.open(%22GET%22%2CLatestMIDIPlayerJS_URL%2C!1)%2CrequestLatestMPJS.send(null)%2C200!%3D%3DrequestLatestMPJS.status)throw%20new%20Error(%22%5B%22%2BNAME%2B%22%5D%20failed%20to%20find%20latest%20MidiPlayerJS%20release%20from%20%22%2BLatestMIDIPlayerJS_URL)%3B1!%3D%3DrequestLatestMPJS.getResponseHeader(%22Content-Type%22).indexOf(%22text%22)%26%26(stringLatestMIDIPlayerJS%3DrequestLatestMPJS.responseText)%3Blet%20jsonLatestMIDIPlayerJS%3DJSON.parse(stringLatestMIDIPlayerJS)%2CLatestMIDIPlayerJS_VERSION%3DjsonLatestMIDIPlayerJS.name%2CMIDIPlayerJS_URL%3D%22https%3A%2F%2Fraw.githubusercontent.com%2Fgrimmdude%2FMidiPlayerJS%2F%22%2BLatestMIDIPlayerJS_VERSION%2B%22%2Fbrowser%2Fmidiplayer.js%22%2CrequestMPJS%3Dnew%20XMLHttpRequest%3Bif(requestMPJS.open(%22GET%22%2CMIDIPlayerJS_URL%2C!1)%2CrequestMPJS.send(null)%2C200!%3D%3DrequestMPJS.status)throw%20new%20Error(%22%5B%22%2BNAME%2B%22%5D%20failed%20to%20load%20MidiPlayerJS%20from%20%22%2BMIDIPlayerJS_URL)%3Bif(1!%3D%3DrequestMPJS.getResponseHeader(%22Content-Type%22).indexOf(%22text%22))%7Blet%20e%3DrequestMPJS.responseText%2Ct%3Ddocument.createElement(%22script%22)%3Bt.type%3D%22text%2Fjavascript%22%2Ct.appendChild(document.createTextNode(e))%2C(document.body%7C%7Cdocument.head%7C%7Cdocument.documentElement).appendChild(t)%7Dlet%20latestVersion%3Dnull%2CupdateURL%3DUPDATE_URL%2B%22%3F%22%2BDate.now()%2CrequestVersion%3Dnew%20XMLHttpRequest%3Bif(requestVersion.open(%22GET%22%2CupdateURL%2C!1)%2CrequestVersion.send(null)%2C200%3D%3D%3DrequestVersion.status)%7Bif(1!%3D%3DrequestVersion.getResponseHeader(%22Content-Type%22).indexOf(%22text%22))%7Blet%20e%3DrequestVersion.responseText.split(%22%5Cn%22)%2Ct%3D0%2Cn%3DsetInterval((function()%7Bif(latestVersion)clearInterval(n)%3Belse%7Blet%20n%3De%5Bt%5D%3Bif(n.startsWith(%22%2F%2F%20%40version%22))%7Blet%20e%3Dn.split(%22%20%22)%3BlatestVersion%3De%5Be.length-1%5D%7Dt%2B%2B%7D%7D)%2C1)%7D%7Delse%20latestVersion%3D-1%2Cconsole.warning(%22%5B%22%2BNAME%2B%22%5D%20failed%20to%20find%20latest%20script%20version%20from%20%22%2BUPDATE_URL)%2Cconsole.warning(%22%5B%22%2BNAME%2B%22%5D%20skipping%20version%20check%22)%3Bconst%20SECOND%3D1e3%2CHALF_SECOND%3D500%2CTENTH_OF_SECOND%3D100%2CCHAT_DELAY%3D500%2CSLOW_CHAT_DELAY%3D2e3%2CREPEAT_DELAY%3D500%2CSLOW_DELAY%3D500%2CSONG_NAME_TIMEOUT%3D1e4%2CNOTIFICATION_DURATION%3D15e3%2CGITHUB_REPO%3D%22https%3A%2F%2Fgithub.com%2FAndrew-J-Larson%2FCustom-JS%2F%22%2CGITHUB_ISSUE_TITLE%3D%22%5BFeedback%5D%20%22%2BNAME%2B%22%20%22%2BVERSION%2CGITHUB_ISSUE_BODY%3D%22%5Cx3c!--%20Please%20write%20your%20feedback%20below%20this%20line.%20--%5Cx3e%22%2CFEEDBACK_URL%3DGITHUB_REPO%2B%22issues%2Fnew%3Ftitle%3D%22%2BencodeURIComponent(GITHUB_ISSUE_TITLE)%2B%22%26body%3D%22%2BencodeURIComponent(GITHUB_ISSUE_BODY)%2CBANNED_PLAYERS%3D%5B%5D%2CLIMITED_PLAYERS%3D%5B%5D%2CCHAT_MAX_CHARS%3D512%2CPERCUSSION_CHANNELS%3D%5B10%5D%2CQUOTA_SIZE_STANDARD_MAX_ROOM_OWNED%3D1800%2CMIDI_FILE_SIZE_LIMIT_BYTES%3D5242880%2CMIDI_FILE_SIZE_MAX_LIMIT_BYTES%3D52428800%2CMOD_SOLO_PLAY%3D!0%2CPREFIX%3D%22mp!%22%2CPREFIX_LENGTH%3D3%2CMOD_KEYWORD%3D%22MIDI%22%2CMOD_DISPLAYNAME%3D%22MIDI%20Player%22%2CMOD_USERNAME%3DMOD_DISPLAYNAME%2B%22%20(%60mp!help%60)%22%2CMOD_NAMESPACE%3D%22(%20%22%2BNAMESPACE%2B%22%20)%22%2CMOD_DESCRIPTION%3D%22%5Bv3.9.99%5D%20%22%2BDESCRIPTION%2B%22%20Made%20by%20a%20nerd%20in%20javascript.%20Special%20thanks%20to%20grimmdude%20for%20https%3A%2F%2Fgithub.com%2Fgrimmdude%2FMidiPlayerJS%20%22%2B(MidiPlayer%26%26MidiPlayer.Constants%26%26MidiPlayer.Constants.VERSION%3F%22(v%22%2BMidiPlayer.Constants.VERSION%2B%22)%20%22%3A%22%22)%2B%22library.%22%2CMOD_AUTHOR%3D%22Created%20by%20%22%2BAUTHOR%2B%22.%22%2CBASE_COMMANDS%3D%5B%5B%22help%20%5Bcommand%5D%22%2C%22displays%20info%20about%20command%2C%20but%20no%20command%20entered%20shows%20the%20commands%22%5D%2C%5B%22about%22%2C%22get%20information%20about%20this%20mod%22%5D%2C%5B%22link%22%2C%22get%20the%20download%20link%20for%20this%20mod%22%5D%2C%5B%22feedback%22%2C%22shows%20link%20to%20send%20feedback%20about%20the%20mod%20to%20the%20developer%22%5D%2C%5B%22ping%22%2C%22gets%20the%20milliseconds%20response%20time%22%5D%5D%2CMOD_COMMANDS%3D%5B%5B%22play%20%5BMIDI%20URL%5D%22%2C%22plays%20a%20specific%20song%20(URL%20must%20be%20a%20direct%20link%20to%20a%20MIDI%20file)%22%5D%2C%5B%22stop%22%2C%22stops%20all%20music%20from%20playing%22%5D%2C%5B%22pause%22%2C%22pauses%20the%20music%20at%20that%20moment%20in%20the%20song%22%5D%2C%5B%22resume%22%2C%22plays%20music%20right%20where%20pause%20left%20off%22%5D%2C%5B%22song%22%2C%22shows%20the%20current%20song%20playing%20and%20at%20what%20moment%20in%20time%22%5D%2C%5B%22repeat%22%2C%22toggles%20repeating%20current%20song%20on%20or%20off%22%5D%2C%5B%22sustain%22%2C%22toggles%20how%20sustain%20is%20controlled%20via%20either%20MIDI%20or%20by%20MPP%22%5D%2C%5B%22percussion%22%2C%22toggles%20the%20percussion%20instruments%20on%20or%20off%20(off%20by%20default%20since%20it%20makes%20most%20MIDIs%20sound%20bad)%22%5D%5D%2CMOD_OWNER_COMMANDS%3D%5B%5B%22loading%22%2C%22toggles%20the%20MIDI%20loading%20progress%20audio%2C%20or%20text%2C%20on%20or%20off%22%5D%2C%5B%22public%22%2C%22toggles%20the%20public%20mod%20commands%20on%20or%20off%22%5D%5D%2CPRE_MSG%3DMOD_USERNAME%2CPRE_HELP%3DPRE_MSG%2B%22%20%5BHelp%5D%22%2CPRE_ABOUT%3DPRE_MSG%2B%22%20%5BAbout%5D%22%2CPRE_LINK%3DPRE_MSG%2B%22%20%5BLink%5D%22%2CPRE_FEEDBACK%3DPRE_MSG%2B%22%20%5BFeedback%5D%22%2CPRE_PING%3DPRE_MSG%2B%22%20Pong!%22%2CPRE_SETTINGS%3DPRE_MSG%2B%22%20%5BSettings%5D%22%2CPRE_DOWNLOADING%3DPRE_MSG%2B%22%20%5BDownloading%5D%22%2CPRE_LIMITED%3DPRE_MSG%2B%22%20Limited!%22%2CPRE_ERROR%3DPRE_MSG%2B%22%20Error!%22%2CBAR_LEFT%3D%22%E3%80%8C%22%2CBAR_RIGHT%3D%22%E3%80%8D%22%2CBAR_BLOCK_FILL%3D%22%E2%96%A9%22%2CBAR_BLOCK_EMPTY%3D%22%E2%96%A2%22%2CBAR_ARROW_RIGHT%3D%22%E2%80%94%E2%9E%A4%22%2CBAR_NOW_PLAYING%3D%22%E3%80%8C%E2%80%89%E2%80%89Now%20playing%E2%80%89%E2%80%89%E3%80%8D%22%2CBAR_PLAYING%3D%22%E3%80%8C%E2%80%89%E2%80%89%E2%80%89%E2%80%89Playing%E2%80%89%E2%80%89%E2%80%89%E2%80%89%E3%80%8D%22%2CBAR_DONE_PLAYING%3D%22%E3%80%8C%E2%80%89Done%20playing%E2%80%89%E2%80%89%E3%80%8D%22%2CBAR_PAUSED%3D%22%E3%80%8C%E2%80%89%E2%80%89%E2%80%89%E2%80%89Paused%E2%80%89%E2%80%89%E2%80%89%E2%80%89%E2%80%89%E3%80%8D%22%2CBAR_STILL_PAUSED%3D%22%E3%80%8C%E2%80%89Still%20paused%E2%80%89%E2%80%89%E3%80%8D%22%2CBAR_RESUMED%3D%22%E3%80%8C%E2%80%89%E2%80%89%E2%80%89%E2%80%89Resumed%E2%80%89%E2%80%89%E2%80%89%E2%80%89%E3%80%8D%22%2CBAR_STILL_RESUMED%3D%22%E3%80%8C%E2%80%89Still%20resumed%E2%80%89%E3%80%8D%22%2CBAR_STOPPED%3D%22%E3%80%8C%E2%80%89%E2%80%89%E2%80%89%E2%80%89Stopped%E2%80%89%E2%80%89%E2%80%89%E2%80%89%E3%80%8D%22%2CABORTED_DOWNLOAD%3D%22Stopped%20download.%22%2CWHERE_TO_FIND_MIDIS%3D%22You%20can%20find%20some%20good%20MIDIs%20to%20upload%20from%20https%3A%2F%2Fbitmidi.com%2F%20%2C%20https%3A%2F%2Fmidiworld.com%2F%20%2C%20https%3A%2F%2Fwww.midis101.com%2F%20%2C%20https%3A%2F%2Fwww.midishrine.com%2F%20%2C%20https%3A%2F%2Fwww.vgmusic.com%2F%20%2C%20https%3A%2F%2Fmoviethemes.net%2F%20%2C%20https%3A%2F%2Fhamienet.com%2F%20%2C%20and%20supports%20even%20more%20sites%20now%2C%20or%20you%20can%20use%20your%20own%20MIDI%20files%20via%20Google%20Drive%2FDropbox%2Fetc.%20with%20a%20direct%20download%20link%22%2CNOT_OWNER%3D%22The%20mod%20isn't%20the%20owner%20of%20the%20room%22%2CNO_SONG%3D%22Not%20currently%20playing%20anything%22%2CPROGRESS_BAR_BLOCK_SIZE%3D26%2CLIST_BULLET%3D%22%E2%80%A2%20%22%2CDESCRIPTION_SEPARATOR%3D%22%20-%20%22%2CCONSOLE_IMPORTANT_STYLE%3D%22background-color%3A%20red%3B%20color%3A%20white%3B%20font-weight%3A%20bold%22%2CMPP_DYNAMIC_BUTTONS_SELECTOR%3D%22%23bottom%20%3E%20div.relative%20%3E%20%23buttons%22%2CCSS_VARIABLE_X_DISPLACEMENT%3D%22--xDisplacement%22%2CCSS_VARIABLE_Y_DISPLACEMENT%3D%22--yDisplacement%22%2CCSS_VARIABLE_X_INITIAL%3D%22--xInitial%22%2CCSS_VARIABLE_Y_INITIAL%3D%22--yInitial%22%2CCSS_VARIABLE_Y_TOGGLE_INITIAL%3D%22--yToggleInitial%22%2CPRE_ELEMENT_ID%3D%5BAUTHOR%2CMOD_DISPLAYNAME%5D.join(%22%20%22).toLowerCase().replace(%2F%5B%5Ea-z0-9%20%5D%2Fgi%2C%22%22).replaceAll(%22%20%22%2C%22-%22)%2B%22-mod%22%2CTOGGLER_ELEMENT_ID%3DPRE_ELEMENT_ID%2B%22-toggler%22%2CQUERY_BOTTOM_UGLY_BTNS%3D%60%23bottom%20%3E%20div%20%3E%20.ugly-button%3Anot(%5Bid%5E%3D%24%7BPRE_ELEMENT_ID%7D%5D)%60%2CELEM_ON%3D%22display%3Ablock%3B%22%2CELEM_OFF%3D%22display%3Anone%3B%22%2CELEM_POS%3D%22position%3Aabsolute%3B%22%2CBTN_STYLE%3DELEM_POS%2BELEM_OFF%3Blet%20endDelay%2CpublicOption%3D!1%2Cpinging%3D!1%2CpingTime%3D0%2CfileSizeLimitBytes%3D5242880%2CcurrentRoom%3Dnull%2CchatDelay%3D500%2CmppPianoNotes%3Dnull%2CmppNoteBank%3Dnull%2CsustainState%3D%7Bon%3A!1%2CturnBackOn%3A!1%7D%2CmppDynamicButtons%3Dnull%2CloadingOption%3D!1%2CloadingProgress%3D0%2CloadingMusicLoop%3Dnull%2CloadingMusicPrematureStop%3D!1%2CfinishedSongName%3Dnull%2Cended%3D!0%2Cstopped%3D!1%2Cpaused%3D!1%2CuploadButton%3Dnull%2CcurrentSongProgress%3D-1%2CcurrentSongEventsPlayed%3D0%2CcurrentSongTotalEvents%3D0%2CcurrentSongData%3Dnull%2CcurrentFileLocation%3Dnull%2CcurrentSongName%3Dnull%2CpreviousSongData%3Dnull%2CpreviousSongName%3Dnull%2CrepeatOption%3D!1%2CsustainOption%3D!0%2CpercussionOption%3D!1%2CloadingProgressNotification%3Dnull%2CelapsingProgressNotification%3Dnull%2CfetchAbortController%3Dnew%20AbortController%2CfetchAbortSignal%3DfetchAbortController.signal%2Cdownloading%3Dnull%2Cdebouncer%3D0%2CpageVisible%3D!0%3Bdocument.addEventListener(%22visibilitychange%22%2C(function()%7BpageVisible%3D!document.hidden%7D))%3Bconst%20Player%3Dnew%20MidiPlayer.Player%3Blet%20useCorsUrl%3Dfunction(e%2Ct%3D!1)%7Blet%20n%3Dnull%2Co%3D%22https%3A%2F%2Fcorsproxy.io%2F%3F%22%3Breturn%20t%26%26(o%3D%22https%3A%2F%2Fapi.allorigins.win%2Fget%3Furl%3D%22)%2C-1%3D%3De.indexOf(o)%26%26(n%3Do%2BencodeURIComponent(e))%2Cn%7D%2CgetContentDispositionFilename%3Dfunction(e%2Ct%2Cn)%7Bif(!e)return%20n(t%2Cnull)%2Cnull%3Bfetch(%22https%3A%2F%2Fapi.httpstatus.io%2Fv1%2Fstatus%22%2C%7Bmethod%3A%22POST%22%2Cheaders%3A%7B%22Content-Type%22%3A%22application%2Fjson%3B%20charset%3Dutf-8%22%7D%2Cbody%3A'%7B%22requestUrl%22%3A%22'%2Be%2B'%22%2C%22responseHeaders%22%3Atrue%7D'%7D).then((e%3D%3Ee.json())).then((e%3D%3E%7Blet%20t%3Dnull%2Cn%3Dnull%3Btry%7Bn%3De.response.chain%5B0%5D.responseHeaders%7Dcatch%7Bn%3Dnull%7Dif(n)%7Blet%20e%3Dn.location%2Co%3Dn%5B%22content-disposition%22%5D%3Bif(o)%7Bt%3Do.substring(o.indexOf(%22filename%3D%22)%2B9)%3Blet%20e%3Dt.indexOf(%22%3B%20filename*%3D%22)%3B-1!%3De%26%26(t%3Dt.substring(0%2Ce))%3Blet%20n%3Dt.length-1%3Bt%5B0%5D%3D%3Dt%5Bn%5D%26%26'%22'%3D%3Dt%5B0%5D%26%26(t%3Dt.substring(1%2Cn))%7D!t%26%26e%26%26%22%22!%3De%26%26(t%3De)%7Dreturn%20t%7D)).then((e%3D%3E%7Bn(t%2Ce)%7D))%7D%2CgetLoadingProgress%3Dfunction(e%2Ct)%7Blet%20n%3D2*e-2%2Co%3Dt%25n%7C%7Cn%2Ci%3Do%3Ee%2Cs%3D(i%3F-1%3A1)*(o%2B(i%3F-2*e%3A0))-1%2Ca%3D%22%22%3Bfor(let%20t%3D0%3Bt%3Ce%3Bt%2B%2B)a%2B%3Dt%3D%3Ds%3F%22%E2%96%A9%22%3A%22%E2%96%A2%22%3Breturn%20a%7D%2CgetElapsedProgressInt%3Dfunction(e%2Ct%2Cn)%7Breturn%20Math.round(t%2Fn*e)%7D%2CgetElapsingProgress%3Dfunction(e%2Ct%2Cn)%7Blet%20o%3DgetElapsedProgressInt(e%2Ct%2Cn)%2Ci%3D%22%22%3Bfor(let%20e%3D0%3Be%3Co%3Be%2B%2B)i%2B%3D%22%E2%96%A9%22%3Bfor(let%20t%3D0%3Bt%3Ce-o%3Bt%2B%2B)i%2B%3D%22%E2%96%A2%22%3Breturn%20i%7D%2CpreventsLoadingMusic%3Dfunction()%7Breturn!loadingMusicPrematureStop%26%26!Player.isPlaying()%26%26!MPP.client.preventsPlaying()%7D%2ChumanMusic%3Dfunction()%7BsetTimeout((function()%7BpreventsLoadingMusic()%26%26MPP.press(%22c5%22%2C1)%2CpreventsLoadingMusic()%26%26MPP.release(%22c5%22)%7D)%2C200)%2CsetTimeout((function()%7BpreventsLoadingMusic()%26%26MPP.press(%22d5%22%2C1)%2CpreventsLoadingMusic()%26%26MPP.release(%22d5%22)%7D)%2C700)%2CsetTimeout((function()%7BpreventsLoadingMusic()%26%26MPP.press(%22c5%22%2C1)%2CpreventsLoadingMusic()%26%26MPP.release(%22c5%22)%2CloadingMusicPrematureStop%3D!1%7D)%2C1200)%7D%2CstartLoadingMusic%3Dfunction()%7Bnull%3D%3DloadingMusicLoop%26%26(humanMusic()%2CloadingMusicLoop%3DsetInterval((function()%7BhumanMusic()%7D)%2C2200))%7D%2CstopLoadingMusic%3Dfunction()%7Bnull!%3DloadingMusicLoop%26%26(loadingMusicPrematureStop%3D!0%2CclearInterval(loadingMusicLoop)%2CloadingMusicLoop%3Dnull)%7D%2Cexists%3Dfunction(e)%7Breturn%20void%200!%3D%3De%26%26null!%3De%7D%2CrandomNumber%3Dfunction(e%2Ct)%7Breturn%20e%3DMath.ceil(e)%2Ct%3DMath.floor(t)%2CMath.floor(Math.random()*(t-e%2B1))%2Be%7D%2CquoteString%3Dfunction(e)%7Blet%20t%3De%3Breturn%20exists(e)%26%26%22%22!%3De%26%26(t%3D'%22'%2Be%2B'%22')%2Ct%7D%3Bfunction%20dataURItoBlob(e)%7Bfor(var%20t%3Datob(e.split(%22%2C%22)%5B1%5D)%2Cn%3De.split(%22%2C%22)%5B0%5D.split(%22%3A%22)%5B1%5D.split(%22%3B%22)%5B0%5D%2Co%3Dnew%20ArrayBuffer(t.length)%2Ci%3Dnew%20Uint8Array(o)%2Cs%3D0%3Bs%3Ct.length%3Bs%2B%2B)i%5Bs%5D%3Dt.charCodeAt(s)%3Breturn%20new%20Blob(%5Bo%5D%2C%7Btype%3An%7D)%7Dlet%20urlToBlob%3Dfunction(e%2Ct)%7Blet%20n%3De.toLowerCase()%2Co%3D0%3D%3Dn.indexOf(%22http%3A%2F%2F%22)%2Ci%3D0%3D%3Dn.indexOf(%22https%3A%2F%2F%22)%3Bif(!o%26%26!i%26%26-1!%3De.indexOf(%22%3A%2F%2F%22))return%20t(null)%2Cnull%3Blet%20s%3De%2Ca%3De%2Cl%3De%3Bif(o%3F(s%3Ds.substring(7)%2Cl%3D%22https%3A%2F%2F%22%2Bs)%3Ai%3F(s%3Ds.substring(8)%2Ca%3D%22http%3A%2F%2F%22%2Bs)%3A(a%3D%22http%3A%2F%2F%22%2Ba%2Cl%3D%22https%3A%2F%2F%22%2Bl)%2CmppChatSend(PRE_DOWNLOADING%2B%22%20%22%2Be)%2CloadingOption)startLoadingMusic()%3Belse%7Blet%20t%3D0%3Bdownloading%3DsetInterval((function()%7BloadingProgressNotification%26%26(loadingProgressNotification.close()%2CloadingProgressNotification%3Dnull)%3Blet%20n%3D'style%3D%22color%3A%20'%2B(MPP.client.user.color%3FMPP.client.user.color%3A%22%230F0%22)%2B'%20!important%22'%2Co%3DgetLoadingProgress(26%2Ct)%3BloadingProgressNotification%3DmppNotificationSend(%7Bhtml%3A'%3Cdiv%20class%3D%22title%22%20style%3D%22display%3A%20block%20!important%22%3E%3Ccode%20class%3D%22markdown%22%3E%E3%80%8C%3Cspan%20'%2Bn%2B%22%3E%22%2Bo%2B'%3C%2Fspan%3E%E3%80%8D%3C%2Fcode%3E%3Cspan%3E%20%E2%80%89%3C%2Fspan%3E%3C%2Fdiv%3E%3Cdiv%20class%3D%22text%22%3EDownloading%3A%20%3Ccode%20class%3D%22markdown%22%20'%2Bn%2B%22%3E%22%2Be%2B%22%3C%2Fcode%3E%3C%2Fdiv%3E%22%2Cduration%3A500%2Cclass%3A%22short%22%7D)%2Ct%2B%2B%7D)%2C200)%7Dfetch(l%2C%7Bsignal%3AfetchAbortSignal%7D).then((e%3D%3E%7Bif(!e.ok)throw%20new%20Error(%22Network%20response%20was%20not%20ok%22)%3Breturn%20e.blob()%7D)).then((e%3D%3E%7Bif(!e)throw%20new%20Error(%22BLOB%20wasn't%20retrieved%22)%3BstopLoadingMusic()%2CclearInterval(downloading)%2Cdownloading%3Dnull%2Ct(e)%7D)).catch((e%3D%3E%7Bconsole.error(%22Normal%20fetch%20(secure%20URL)%20couldn't%20get%20the%20file%3A%22%2Ce.message)%3Blet%20n%3DuseCorsUrl(a)%3Bfetch(n%2C%7Bsignal%3AfetchAbortSignal%7D).then((e%3D%3E%7Bif(!e.ok)throw%20new%20Error(%22Network%20response%20was%20not%20ok%22)%3Breturn%20e.blob()%7D)).then((e%3D%3E%7Bif(!e)throw%20new%20Error(%22BLOB%20wasn't%20retrieved%22)%3BstopLoadingMusic()%2CclearInterval(downloading)%2Cdownloading%3Dnull%2Ct(e)%7D)).catch((e%3D%3E%7Bconsole.error(%22Single%20proxy%20fetch%20(insecure%20URL)%20couldn't%20get%20the%20file%3A%22%2Ce.message)%3Blet%20n%3DuseCorsUrl(l)%3Bfetch(n%2C%7Bsignal%3AfetchAbortSignal%7D).then((e%3D%3E%7Bif(!e.ok)throw%20new%20Error(%22Network%20response%20was%20not%20ok%22)%3Breturn%20e.blob()%7D)).then((e%3D%3E%7Bif(!e)throw%20new%20Error(%22BLOB%20wasn't%20retrieved%22)%3BstopLoadingMusic()%2CclearInterval(downloading)%2Cdownloading%3Dnull%2Ct(e)%7D)).catch((e%3D%3E%7Bconsole.error(%22Single%20proxy%20fetch%20(secure%20URL)%20couldn't%20get%20the%20file%3A%22%2Ce.message)%3Blet%20n%3DuseCorsUrl(useCorsUrl(a%2C!0))%3Bfetch(n%2C%7Bsignal%3AfetchAbortSignal%7D).then((e%3D%3E%7Bif(!e.ok)throw%20new%20Error(%22Network%20response%20was%20not%20ok%22)%3Breturn%20e.json()%7D)).then((e%3D%3E%7Bif(!e)throw%20new%20Error(%22BLOB%20wasn't%20retrieved%22)%3Bif(!e.contents%26%26%22%22!%3De.contents)throw%20new%20Error(%22JSON%20content%20was%20empty%22)%3Bif(-1%3D%3De.contents.indexOf(%22base64%22))throw%20new%20Error(%22Content%20wasn't%20base64%22)%3B%7Blet%20n%3DdataURItoBlob(e.contents)%3BstopLoadingMusic()%2CclearInterval(downloading)%2Cdownloading%3Dnull%2Ct(n)%7D%7D)).catch((e%3D%3E%7Bconsole.error(%22Double%20proxy%20fetch%20(insecure%20URL)%20couldn't%20get%20the%20file%3A%22%2Ce.message)%3Blet%20n%3DuseCorsUrl(useCorsUrl(l%2C!0))%3Bfetch(n%2C%7Bsignal%3AfetchAbortSignal%7D).then((e%3D%3E%7Bif(!e.ok)throw%20new%20Error(%22Network%20response%20was%20not%20ok%22)%3Breturn%20e.json()%7D)).then((e%3D%3E%7Bif(!e)throw%20new%20Error(%22BLOB%20wasn't%20retrieved%22)%3Bif(!e.contents%26%26%22%22!%3De.contents)throw%20new%20Error(%22JSON%20content%20was%20empty%22)%3Bif(-1%3D%3De.contents.indexOf(%22base64%22))throw%20new%20Error(%22Content%20wasn't%20base64%22)%3B%7Blet%20n%3DdataURItoBlob(e.contents)%3BstopLoadingMusic()%2CclearInterval(downloading)%2Cdownloading%3Dnull%2Ct(n)%7D%7D)).catch((e%3D%3E%7Bconsole.error(%22Double%20proxy%20fetch%20(secure%20URL)%20couldn't%20get%20the%20file%3A%22%2Ce.message)%2CstopLoadingMusic()%2CclearInterval(downloading)%2Cdownloading%3Dnull%2Ct(e)%7D))%7D))%7D))%7D))%7D))%7D%2CfileOrBlobToBase64%3Dfunction(e%2Ct)%7Bnull%3D%3De%26%26(stopLoadingMusic()%2Ct(null))%3Blet%20n%3Dnew%20FileReader%3Bn.readAsDataURL(e)%2Cn.onloadend%3Dfunction()%7Blet%20e%3Dn.result%3Bt(e)%7D%7D%2CgetMaxFileSize%3Dfunction(e%2Ct)%7Breturn(MPP%26%26(MPP.noteQuota%3FMPP.noteQuota.max%3FMPP.noteQuota.max%3A0%3A1801))%3E1800%3Ft%3Ae%7D%2CisMidi%3Dfunction(e)%7Bif(exists(e))%7Bswitch(e.type)%7Bcase%22%40file%2Fmid%22%3Acase%22%40file%2Fmidi%22%3Acase%22application%2Fmid%22%3Acase%22application%2Fmidi%22%3Acase%22application%2Fx-mid%22%3Acase%22application%2Fx-midi%22%3Acase%22audio%2Fmid%22%3Acase%22audio%2Fmidi%22%3Acase%22audio%2Fx-mid%22%3Acase%22audio%2Fx-midi%22%3Acase%22audio%2Fsp-mid%22%3Acase%22audio%2Fsp-midi%22%3Acase%22music%2Fcrescendo%22%3Acase%22x-music%2Fmid%22%3Acase%22x-music%2Fmidi%22%3Acase%22x-music%2Fx-mid%22%3Acase%22x-music%2Fx-midi%22%3Areturn!0%7D%7Dreturn!1%7D%2CisOctetStream%3Dfunction(e)%7Breturn!(!exists(e)%7C%7C%22application%2Foctet-stream%22!%3De.type)%7D%2CformattedCommands%3Dfunction(e%2Ct%2Cn)%7Bexists(t)%7C%7C(t%3D%22%22)%3Blet%20o%3D%22%22%3Bfor(let%20i%3D0%3Bi%3Ce.length%3B%2B%2Bi)o%2B%3D(n%3F%22%20%60%22%3A%22%60%22)%2Bt%2Be%5Bi%5D%5B0%5D%2B%22%60%22%2B(i%3Ce.length-1%3F%22%2C%22%3A%22%22)%3Breturn%20o%7D%2CformatCommandInfo%3Dfunction(e%2Ct)%7Breturn%22%60mp!%22%2Be%5Bt%5D%5B0%5D%2B%22%60%20-%20%22%2Be%5Bt%5D%5B1%5D%7D%2CmppChatSend%3Dfunction(e%2Ct)%7BsetTimeout((function()%7BMPP.chat.send(e)%7D)%2Cexists(t)%3Ft%3A0)%7D%2CmppChatMultiSend%3Dfunction(e%2Ct%2Cn)%7Bexists(t)%7C%7C(t%3D%22%22)%3Blet%20o%3D0%3Bfor(let%20n%3D0%3Bn%3Ce.length%3B%2B%2Bn)%7B%22%22!%3De%5Bn%5D%26%26(%2B%2Bo%2CmppChatSend(t%2Be%5Bn%5D%2CchatDelay*o))%7Dreturn%20chatDelay*o%7D%2CmppNotificationSend%3Dfunction(e)%7Bif(exists(MPP.Notification))return%20new%20MPP.Notification(e)%3Bif(e.title%26%26console.log(e.title)%2Ce.text)console.log(e.text)%3Belse%20if(e.html)%7Blet%20t%3Ddocument.createElement(%22div%22)%3Bt.innerHTML%3De.html%3Fe.html.replaceAll(%22%3Cbr%3E%22%2C%22%5Cn%22)%3A%22%22%3Blet%20n%3Dt.textContent%7C%7Ct.innerText%3Bn%26%26console.log(n)%7Dreturn%20null%7D%2CplayerStop%3Dfunction(e%3D!1)%7Bended%3D!0%2Cpaused%3D!1%2Cstopped%3De%7C%7Cstopped%2Cstopped%7C%7C(finishedSongName%3DcurrentSongName)%2CrepeatOption%7C%7C(currentSongData%3Dnull%2CcurrentSongName%3Dnull)%2CcurrentSongEventsPlayed%3D0%2CcurrentSongProgress%3D-1%3Bfor(let%20e%3D0%3Be%3CmppNoteBank.length%3Be%2B%2B)mppNoteBank%5Be%5D%3D0%7D%2CplayerPlay%3Dfunction(e%3D!1)%7Bended%3Dstopped%3Dpaused%3D!1%7D%2CplayerPause%3Dfunction()%7Bended%7C%7Cstopped%7C%7C(paused%3D!0)%7D%2CstopSong%3Dfunction(e)%7Be%26%26(elapsingProgressNotification%26%26(elapsingProgressNotification.close()%2CelapsingProgressNotification%3Dnull)%2CPlayer.stop()%2CplayerStop(!0))%2CsustainState.on%26%26(MPP.releaseSustain()%2CsustainState.on%3D!1%2CsustainState.turnBackOn%3D!e)%2CObject.values(mppPianoNotes).forEach((e%3D%3E%7BMPP.release(e)%7D))%7D%2CopenSong%3Dfunction(e)%7Bended%7C%7CstopSong(!0)%3Btry%7BPlayer.loadDataUri(e)%7Dcatch(e)%7Breturn%20null!%3DpreviousSongData%26%26Player.loadDataUri(previousSongData)%2CmppChatSend(PRE_ERROR%2B%22%20(open)%20%22%2Be)%2C!1%7Dreturn!0%7D%2CplaySong%3Dfunction(e%2Ct)%7Bif(openSong(t))%7BPlayer.play()%2CplayerPlay()%3Blet%20n%3D0%2Co%3DsetInterval((function()%7BPlayer.isPlaying()%3F(clearInterval(o)%2CpreviousSongData%3DcurrentSongData%2CpreviousSongName%3DcurrentSongName%2CcurrentSongData%3Dt%2CcurrentSongName%3De%2CcurrentSongEventsPlayed%3DPlayer.eventsPlayed()%2CcurrentSongTotalEvents%3DPlayer.getTotalEvents()%2CmppChatSend(PRE_MSG%2B%22%20%60%22%2BBAR_NOW_PLAYING%2B%22%60%20%E2%80%94%E2%9E%A4%20%60%22%2BcurrentSongName%2B%22%60%22))%3A1e4%3D%3Dn%3FclearInterval(o)%3An%2B%2B%7D)%2C1)%7D%7D%2CplayURL%3Dfunction(e%2Ct)%7BcurrentFileLocation%3De%3Blet%20n%3DdecodeURIComponent(currentFileLocation.substring(currentFileLocation.lastIndexOf(%22%2F%22)%2B1))%3BplaySong(n%2Ct)%7D%2CplayFile%3Dfunction(e)%7Blet%20t%3Dnull%3Be%26%26e.length%3E%3D1%26%26(t%3De%5B0%5D)%3Blet%20n%3Dnull%2Co%3DPRE_ERROR%2B%22%20(play)%22%3Bexists(t)%3F(n%3Dt.name.split(%2F(%5C%5C%7C%5C%2F)%2Fg).pop()%2CfileSizeLimitBytes%3DgetMaxFileSize(5242880%2C52428800)%2Ct.size%3C%3DfileSizeLimitBytes%3FisMidi(t)%3FfileOrBlobToBase64(t%2C(function(e)%7Bexists(e)%3F(currentFileLocation%3Dt.name%2CplaySong(n%2Ce))%3AmppChatSend(o%2B%22%20Unexpected%20result%2C%20MIDI%20file%20couldn't%20load%22)%7D))%3AmppChatSend(o%2B'%20The%20file%20choosen%2C%20%22'%2Bn%2B%22%5C%22%2C%20is%20either%20corrupted%2C%20or%20it's%20not%20really%20a%20MIDI%20file%22)%3AmppChatSend(o%2B'%20The%20file%20choosen%2C%20%22'%2Bn%2B'%22%2C%20%20is%20too%20big%20(larger%20than%20'%2BfileSizeLimitBytes%2B%22%20bytes)%2C%20please%20choose%20a%20file%20with%20a%20smaller%20size%22))%3AmppChatSend(o%2B%22%20MIDI%20file%20not%20found%22)%2CuploadButton.value%3D%22%22%7D%2CcreateWebpageElements%3Dfunction()%7Blet%20e%3Ddocument.getElementById(%22modal%22)%2Ct%3DparseInt(getComputedStyle(e).zIndex)%2B1%2Cn%3Ddocument.createElement(%22div%22)%3Bn.id%3DPRE_ELEMENT_ID%2B%22-dragAndDropMIDI%22%2Cn.style%3D%60position%3A%20absolute%3B%20width%3A%20100%25%3B%20height%3A%20100%25%3B%20top%3A%200%3B%20display%3A%20none%3B%20place-items%3A%20center%20center%3B%20font-size%3A%202.2vw%3B%20color%3A%20white%3B%20background%3A%20rgba(0%2C0%2C0%2C0.75)%3B%20z-index%3A%20%24%7Bt%7D%60%2Cn.innerText%3D%22Drop%20MIDI%20file%20here%20to%20start%20playing%22%2Cdocument.addEventListener(%22dragenter%22%2C(e%3D%3E%7B0%3D%3D%3Ddebouncer%26%26%22grid%22!%3Dn.style.display%26%26(n.style.display%3D%22grid%22)%2Cdebouncer%2B%2B%7D)%2C!1)%2Cdocument.addEventListener(%22dragleave%22%2C(e%3D%3E%7Bdebouncer--%2C0%3D%3D%3Ddebouncer%26%26%22none%22!%3Dn.style.display%26%26(n.style.display%3D%22none%22)%7D)%2C!1)%2Cdocument.addEventListener(%22dragover%22%2C(e%3D%3E%7Be.preventDefault()%7D)%2C!1)%2Cdocument.addEventListener(%22drop%22%2C(e%3D%3E%7Be.preventDefault()%2Ce.stopPropagation()%2Cdebouncer%3D0%2C%22none%22!%3Dn.style.display%26%26(n.style.display%3D%22none%22)%3Blet%20t%3De.dataTransfer.files%2Co%3D!1%3Bif(Array.prototype.forEach.call(t%2C(function(e)%7Be.type%26%26isMidi(e)%7C%7C(o%3D!0)%7D))%2Co)%7Blet%20e%3DPRE_ERROR%2B%22%20(play)%22%3Bif(t.length%3E1)mppChatSend(e%2B%22%20One%20or%20more%20files%20choosen%20aren't%20MIDI%22)%3Belse%7Blet%20n%3Dt%5B0%5D.name.split(%2F(%5C%5C%7C%5C%2F)%2Fg).pop()%3BmppChatSend(e%2B'%20The%20file%20choosen%2C%20%22'%2Bn%2B%22%5C%22%2C%20is%20either%20corrupted%2C%20or%20it's%20not%20really%20a%20MIDI%20file%22)%7D%7Delse%20playFile(t)%7D)%2C!1)%2Cdocument.body.prepend(n)%3Blet%20o%3DmppDynamicButtons%7C%7Cdocument.querySelector(%22%23bottom%20div%22)%2Ci%3DgetComputedStyle(document.querySelector(%22.ugly-button%22))%2Cs%3DparseInt(i.width)%2Ca%3DparseInt(i.height)%2Cl%3DparseInt(i.borderRadius)%2Cr%3D!1%2Cp%3Ddocument.createElement(%22div%22)%3Bp.title%3D%22Use%20%60mp!help%60%20for%20more%20commands%22%2Cp.id%3DTOGGLER_ELEMENT_ID%2Cp.classList.add(%22ugly-button%22)%2Cp.onclick%3Dfunction()%7Br%3F(d.style.display%3Dh.style.display%3DS.style.display%3DM.style.display%3D_.style.display%3DL.style.display%3DD.style.display%3Db.style.display%3D%22none%22%2Cr%3D!1)%3A(d.style.display%3Dh.style.display%3DS.style.display%3DM.style.display%3D_.style.display%3DL.style.display%3DD.style.display%3Db.style.display%3D%22block%22%2Cr%3D!0)%7D%3Blet%20c%3Ddocument.createTextNode(MOD_DISPLAYNAME)%3Bp.appendChild(c)%2Co.appendChild(p)%3Blet%20d%3Ddocument.createElement(%22div%22)%3Bd.id%3DPRE_ELEMENT_ID%2B%22-open%22%2Cd.classList.add(%22ugly-button%22)%2Co.appendChild(d)%3Blet%20u%3Ddocument.createElement(%22input%22)%2Cm%3DPRE_ELEMENT_ID%2B%22-upload%22%3Bu.id%3Dm%2Cu.style%3D%22opacity%3A0%3Bfilter%3Aalpha(opacity%3D0)%3Bposition%3Aabsolute%3Btop%3A0%3Bleft%3A0%3Bwidth%3A%22%2B(s%2B10)%2B%22px%3Bheight%3A%22%2B(a%2B10)%2B%22px%3Bborder-radius%3A%22%2B(l%2B1)%2B%22px%3B-webkit-border-radius%3A%22%2B(l%2B1)%2B%22px%3B-moz-border-radius%3A%22%2B(l%2B1)%2B%22px%3B%22%2Cu.title%3D%22%20%22%2Cu.type%3D%22file%22%2Cu.accept%3D%22.mid%2C.midi%22%2Cu.onchange%3Dfunction()%7B!MPP.client.preventsPlaying()%26%26u.files.length%3E0%3FplayFile(u.files)%3Aconsole.log(%22No%20MIDI%20file%20selected%22)%7D%3Blet%20f%3Ddocument.getElementsByTagName(%22HEAD%22)%5B0%5D%2Cg%3Dthis.document.createElement(%22link%22)%3Bg.setAttribute(%22rel%22%2C%22stylesheet%22)%2Cg.setAttribute(%22type%22%2C%22text%2Fcss%22)%2Cg.setAttribute(%22href%22%2C%22data%3Atext%2Fcss%3Bcharset%3DUTF-8%2C%22%2BencodeURIComponent(%22%23%22%2Bm%2B%22%2C%20%23%22%2Bm%2B%22%3A%3A-webkit-file-upload-button%20%7Bcursor%3Apointer%7D%22))%2Cf.appendChild(g)%3Blet%20P%3Ddocument.createTextNode(%22Open%22)%3Bd.appendChild(u)%2Cd.appendChild(P)%2CuploadButton%3Du%3Blet%20h%3Ddocument.createElement(%22div%22)%3Bh.id%3DPRE_ELEMENT_ID%2B%22-stop%22%2Ch.classList.add(%22ugly-button%22)%2Ch.onclick%3Dfunction()%7BMPP.client.preventsPlaying()%7C%7Cstop()%7D%3Blet%20E%3Ddocument.createTextNode(%22Stop%22)%3Bh.appendChild(E)%2Co.appendChild(h)%3Blet%20S%3Ddocument.createElement(%22div%22)%3BS.id%3DPRE_ELEMENT_ID%2B%22-repeat%22%2CS.classList.add(%22ugly-button%22)%2CS.onclick%3Dfunction()%7BMPP.client.preventsPlaying()%7C%7Crepeat()%7D%3Blet%20y%3Ddocument.createTextNode(%22Repeat%22)%3BS.appendChild(y)%2Co.appendChild(S)%3Blet%20M%3Ddocument.createElement(%22div%22)%3BM.id%3DPRE_ELEMENT_ID%2B%22-song%22%2CM.classList.add(%22ugly-button%22)%2CM.onclick%3Dfunction()%7BMPP.client.preventsPlaying()%7C%7Csong()%7D%3Blet%20I%3Ddocument.createTextNode(%22Song%22)%3BM.appendChild(I)%2Co.appendChild(M)%3Blet%20_%3Ddocument.createElement(%22div%22)%3B_.id%3DPRE_ELEMENT_ID%2B%22-pause%22%2C_.classList.add(%22ugly-button%22)%2C_.onclick%3Dfunction()%7BMPP.client.preventsPlaying()%7C%7Cpause()%7D%3Blet%20N%3Ddocument.createTextNode(%22Pause%22)%3B_.appendChild(N)%2Co.appendChild(_)%3Blet%20L%3Ddocument.createElement(%22div%22)%3BL.id%3DPRE_ELEMENT_ID%2B%22-resume%22%2CL.classList.add(%22ugly-button%22)%2CL.onclick%3Dfunction()%7BMPP.client.preventsPlaying()%7C%7Cresume()%7D%3Blet%20R%3Ddocument.createTextNode(%22Resume%22)%3BL.appendChild(R)%2Co.appendChild(L)%3Blet%20D%3Ddocument.createElement(%22div%22)%3BD.id%3DPRE_ELEMENT_ID%2B%22-sustain%22%2CD.classList.add(%22ugly-button%22)%2CD.onclick%3Dfunction()%7BMPP.client.preventsPlaying()%7C%7Csustain()%7D%3Blet%20O%3Ddocument.createTextNode(%22Sustain%22)%3BD.appendChild(O)%2Co.appendChild(D)%3Blet%20b%3Ddocument.createElement(%22div%22)%3Bb.id%3DPRE_ELEMENT_ID%2B%22-public%22%2Cb.classList.add(%22ugly-button%22)%2Cb.onclick%3Dfunction()%7BpublicCommands(!0%2C!0)%7D%3Blet%20T%3Ddocument.createTextNode(%22Public%22)%3Bif(b.appendChild(T)%2Co.appendChild(b)%2C!exists(mppDynamicButtons))%7Blet%20e%3D1%2Ct%3D0%3Bdocument.documentElement.style.setProperty(%22--xDisplacement%22%2C%220px%22)%2Cdocument.documentElement.style.setProperty(%22--yDisplacement%22%2C%220px%22)%2Cdocument.documentElement.style.setProperty(%22--xInitial%22%2C%220px%22)%2Cdocument.documentElement.style.setProperty(%22--yInitial%22%2C%220px%22)%2Cdocument.documentElement.style.setProperty(%22--yToggleInitial%22%2C%220px%22)%2Cd.style%3DBTN_STYLE%2B%22top%3Acalc(%22%2Bt%2B%22%20*%20var(--yDisplacement)%20%2B%20var(--yInitial))%3Bleft%3Acalc(%22%2Be%2B%22%20*%20var(--xDisplacement)%20%2B%20var(--xInitial))%3B%22%2Ce%2B%2B%2Ch.style%3DBTN_STYLE%2B%22top%3Acalc(%22%2Bt%2B%22%20*%20var(--yDisplacement)%20%2B%20var(--yInitial))%3Bleft%3Acalc(%22%2Be%2B%22%20*%20var(--xDisplacement)%20%2B%20var(--xInitial))%3B%22%2Ce%2B%2B%2CS.style%3DBTN_STYLE%2B%22top%3Acalc(%22%2Bt%2B%22%20*%20var(--yDisplacement)%20%2B%20var(--yInitial))%3Bleft%3Acalc(%22%2Be%2B%22%20*%20var(--xDisplacement)%20%2B%20var(--xInitial))%3B%22%2Ce%2B%2B%2CM.style%3DBTN_STYLE%2B%22top%3Acalc(%22%2Bt%2B%22%20*%20var(--yDisplacement)%20%2B%20var(--yInitial))%3Bleft%3Acalc(%22%2Be%2B%22%20*%20var(--xDisplacement)%20%2B%20var(--xInitial))%3B%22%2Ce%3D1%2Ct%2B%2B%2C_.style%3DBTN_STYLE%2B%22top%3Acalc(%22%2Bt%2B%22%20*%20var(--yDisplacement)%20%2B%20var(--yInitial))%3Bleft%3Acalc(%22%2Be%2B%22%20*%20var(--xDisplacement)%20%2B%20var(--xInitial))%3B%22%2Ce%2B%2B%2CL.style%3DBTN_STYLE%2B%22top%3Acalc(%22%2Bt%2B%22%20*%20var(--yDisplacement)%20%2B%20var(--yInitial))%3Bleft%3Acalc(%22%2Be%2B%22%20*%20var(--xDisplacement)%20%2B%20var(--xInitial))%3B%22%2Ce%2B%2B%2CD.style%3DBTN_STYLE%2B%22top%3Acalc(%22%2Bt%2B%22%20*%20var(--yDisplacement)%20%2B%20var(--yInitial))%3Bleft%3Acalc(%22%2Be%2B%22%20*%20var(--xDisplacement)%20%2B%20var(--xInitial))%3B%22%2Ce%2B%2B%2Cb.style%3DBTN_STYLE%2B%22top%3Acalc(%22%2Bt%2B%22%20*%20var(--yDisplacement)%20%2B%20var(--yInitial))%3Bleft%3Acalc(%22%2Be%2B%22%20*%20var(--xDisplacement)%20%2B%20var(--xInitial))%3B%22%2Ce%3D0%2Ct%3D0%2Cp.style%3DELEM_POS%2BELEM_ON%2B%22top%3Acalc(%22%2Bt%2B%22%20*%20var(--yDisplacement)%20%2B%20var(--yToggleInitial))%3Bleft%3Acalc(%22%2Be%2B%22%20*%20var(--xDisplacement)%20%2B%20var(--xInitial))%3B%22%7D%7D%2CplayerLimited%3Dfunction(e)%7BmppChatSend(PRE_LIMITED%2B%22%20You%20must%20of%20done%20something%20to%20earn%20this%20%22%2BquoteString(e)%2B%22%20as%20you%20are%20no%20longer%20allowed%20to%20use%20the%20mod%22)%7D%2CcmdNotFound%3Dfunction(e)%7Blet%20t%3DPRE_ERROR%2B%22%20Invalid%20command%2C%20%22%2BquoteString(e)%2B%22%20doesn't%20exist%22%3BpublicOption%3FmppChatSend(t)%3Aconsole.log(t)%7D%2Chelp%3Dfunction(e%2Ct%2Cn)%7BMPP.client.isOwner()%3Bif(exists(e)%26%26%22%22!%3De)%7Blet%20t%3Dnull%2Cn%3Dnull%2Co%3Dnull%3Be%3De.toLowerCase()%3Bfor(let%20i%3D0%3Bi%3CBASE_COMMANDS.length%3Bi%2B%2B)0%3D%3DBASE_COMMANDS%5Bi%5D%5B0%5D.indexOf(e)%26%26(t%3De%2Co%3DBASE_COMMANDS%2Cn%3Di)%3Bfor(let%20i%3D0%3Bi%3CMOD_COMMANDS.length%3Bi%2B%2B)0%3D%3DMOD_COMMANDS%5Bi%5D%5B0%5D.indexOf(e)%26%26(t%3De%2Co%3DMOD_COMMANDS%2Cn%3Di)%3Bfor(let%20i%3D0%3Bi%3CMOD_OWNER_COMMANDS.length%3Bi%2B%2B)0%3D%3DMOD_OWNER_COMMANDS%5Bi%5D%5B0%5D.indexOf(e)%26%26(t%3De%2Co%3DMOD_OWNER_COMMANDS%2Cn%3Di)%3Bexists(t)%3FmppChatSend(PRE_HELP%2B%22%20%22%2BformatCommandInfo(o%2Cn))%3AcmdNotFound(e)%7Delse%7Blet%20e%3DformattedCommands(MOD_COMMANDS%2C%22mp!%22%2C!0)%3BmppChatSend(PRE_HELP%2B%22%20Commands%3A%20%22%2BformattedCommands(BASE_COMMANDS%2C%22mp!%22%2C!0)%2B(publicOption%3F%22%2C%20%22%2Be%3A%22%22)%2B(t%3D%3Dn%3F%22%20%7C%20Mod%20Owner%20Commands%3A%20%22%2B(publicOption%3F%22%22%3Ae%2B%22%2C%20%22)%2BformattedCommands(MOD_OWNER_COMMANDS%2C%22mp!%22%2C!0)%3A%22%22))%7D%7D%2Cabout%3Dfunction()%7BmppChatSend(PRE_ABOUT%2B%22%20%22%2BMOD_DESCRIPTION%2B%22%20%22%2BMOD_AUTHOR%2B%22%20%22%2BMOD_NAMESPACE)%7D%2Clink%3Dfunction()%7BmppChatSend(PRE_LINK%2B%22%20You%20can%20get%20this%20mod%20from%20%22%2BSUPPORT_URL)%7D%2Cfeedback%3Dfunction()%7BmppChatSend(PRE_FEEDBACK%2B%22%20Please%20go%20to%20%22%2BFEEDBACK_URL%2B%22%20in%20order%20to%20submit%20feedback.%22)%7D%2Cping%3Dfunction()%7Bpinging%3D!0%2CpingTime%3DDate.now()%2CmppChatSend(PRE_PING)%7D%2Cplay%3Dfunction(e)%7Blet%20t%3DPRE_ERROR%2B%22%20(play)%22%3Bif(exists(e)%26%26%22%22!%3De)%7Blet%20n%3De.startsWith(%22http%3A%2F%2F%22)%7C%7Ce.startsWith(%22https%3A%2F%2F%22)%3Fe%3A-1%3D%3De.indexOf(%22%3A%2F%2F%22)%3Fnull%3A%22http%3A%2F%2F%22%2Be%3B(n%3Fnew%20URL(n)%3Anull)%3FurlToBlob(e%2C(function(n)%7Bn%20instanceof%20Error%26%26%22The%20user%20aborted%20a%20request.%22%3D%3Dn.message%3FmppChatSend(PRE_MSG%2B%22%20%22%2BABORTED_DOWNLOAD)%3Anull%3D%3Dn%3FmppChatSend(t%2B%22%20Invalid%20URL%2C%20this%20is%20not%20a%20MIDI%20file%2C%20or%20the%20file%20requires%20a%20manual%20download%20from%20%22%2BquoteString(%22%20%22%2Be%2B%22%20%22)%2B%22...%20%22%2BWHERE_TO_FIND_MIDIS)%3AisMidi(n)%7C%7CisOctetStream(n)%3FgetContentDispositionFilename(e%2Cn%2C(function(o%2Ci)%7BgetContentDispositionFilename(i%2Cn%2C(function(n%2Co)%7Blet%20s%3Di%3Bo%7C%7C(o%3Di%2Cs%3De)%2Cn.size%3C%3DfileSizeLimitBytes%3FfileOrBlobToBase64(n%2C(function(e)%7Bexists(e)%3F(isOctetStream(n)%26%26(e%3De.replace(%22application%2Foctet-stream%22%2C%22audio%2Fmidi%22))%2Co%3FplaySong(o%2Ce)%3AplayURL(s%2Ce))%3AmppChatSend(t%2B%22%20Unexpected%20result%2C%20MIDI%20file%20couldn't%20load...%20%22%2BWHERE_TO_FIND_MIDIS)%7D))%3AmppChatSend(t%2B'%20The%20file%20choosen%2C%20%22'%2B(o%7C%7CdecodeURIComponent(s.substring(s.lastIndexOf(%22%2F%22)%2B1)))%2B'%22%2C%20%20is%20too%20big%20(larger%20than%20the%20limit%20of%20'%2BfileSizeLimitBytes%2B%22%20bytes)%2C%20please%20choose%20a%20file%20with%20a%20smaller%20size%22)%7D))%7D))%3AmppChatSend(t%2B%22%20Invalid%20URL%2C%20this%20is%20not%20a%20MIDI%20file...%20%22%2BWHERE_TO_FIND_MIDIS)%7D))%3AmppChatSend(t%2B%22%20Invalid%20URL%2C%20must%20be%20a%20web%20link%20to%20a%20file...%20%22%2BWHERE_TO_FIND_MIDIS)%7Delse%20stopLoadingMusic()%2CmppChatSend(t%2B%22%20No%20MIDI%20url%20entered...%20%22%2BWHERE_TO_FIND_MIDIS)%7D%2Cstop%3Dfunction()%7Bif(downloading)fetchAbortController.abort()%3Belse%20if(ended)mppChatSend(PRE_MSG%2B%22%20%22%2BNO_SONG)%3Belse%7Blet%20e%3DcurrentSongName%3BstopSong(!0)%2CmppChatSend(PRE_MSG%2B%22%20%60%22%2BBAR_STOPPED%2B%22%60%20%E2%80%94%E2%9E%A4%20%60%22%2Be%2B%22%60%22)%7D%7D%2Cpause%3Dfunction(e)%7Bif(ended)mppChatSend(PRE_MSG%2B%22%20%22%2BNO_SONG)%3Belse%7Blet%20t%3DPRE_MSG%2B%22%20%60%22%3Bpaused%3Ft%2B%3DBAR_STILL_PAUSED%3A(Player.pause()%2CplayerPause()%2CstopSong()%2Ct%2B%3DBAR_PAUSED)%2CmppChatSend(t%2B%22%60%20%E2%80%94%E2%9E%A4%20%60%22%2BcurrentSongName%2B%22%60%22%2B(e%3F%22%20Reason%3A%20Note%20quota%20was%20drained.%22%3A%22%22))%7D%7D%2Cresume%3Dfunction()%7Bif(ended)mppChatSend(PRE_MSG%2B%22%20%22%2BNO_SONG)%3Belse%7Blet%20e%3DPRE_MSG%2B%22%20%60%22%3Bpaused%3F(sustainState.turnBackOn%26%26(MPP.pressSustain()%2CsustainState.on%3D!0%2CsustainState.turnBackOn%3D!1)%2CPlayer.play()%2CplayerPlay()%2Ce%2B%3DBAR_RESUMED)%3Ae%2B%3DBAR_STILL_RESUMED%2CmppChatSend(e%2B%22%60%20%E2%80%94%E2%9E%A4%20%60%22%2BcurrentSongName%2B%22%60%22)%7D%7D%2Csong%3Dfunction()%7Bif(exists(currentSongName)%26%26%22%22!%3DcurrentSongName)%7BmppChatSend(PRE_MSG%2B%22%20%60%22%2B(paused%3FBAR_PAUSED%3ABAR_PLAYING)%2B%22%60%20%E2%80%94%E2%9E%A4%20%60%22%2BcurrentSongName%2B%22%60%22)%7Delse%20mppChatSend(PRE_MSG%2B%22%20%22%2BNO_SONG)%7D%2Crepeat%3Dfunction()%7BrepeatOption%3D!repeatOption%2CmppChatSend(PRE_SETTINGS%2B%22%20Repeat%20set%20to%20%22%2B(repeatOption%3F%22%22%3A%22not%22)%2B%22%20repeating%22)%7D%2Csustain%3Dfunction()%7BsustainOption%3D!sustainOption%2CmppChatSend(PRE_SETTINGS%2B%22%20Sustain%20set%20to%20%22%2B(sustainOption%3F%22MIDI%20controlled%22%3A%22MPP%20controlled%22))%7D%2Cpercussion%3Dfunction()%7BpercussionOption%3D!percussionOption%2CmppChatSend(PRE_SETTINGS%2B%22%20%22%2B(percussionOption%3F%22En%22%3A%22Dis%22)%2B%22abled%20percussion%20instruments%22)%7D%2Cloading%3Dfunction(e%2Ct)%7Be%3D%3Dt%26%26(loadingOption%3D!loadingOption%2CmppChatSend(PRE_SETTINGS%2B%22%20The%20MIDI%20loading%20progress%20is%20now%20set%20to%20%22%2B(loadingOption%3F%22audio%22%3A%22text%22)))%7D%2CpublicCommands%3Dfunction(e%2Ct)%7Be%3D%3Dt%26%26(publicOption%3D!publicOption%2CmppChatSend(PRE_SETTINGS%2B%22%20Public%20mod%20commands%20were%20turned%20%22%2B(publicOption%3F%22on%22%3A%22off%22)))%7D%2CmppGetRoom%3Dfunction()%7Breturn%20MPP%26%26MPP.client%26%26MPP.client.channel%26%26MPP.client.channel._id%3FMPP.client.channel._id%3AMPP%26%26MPP.client%26%26MPP.client.desiredChannelId%3FMPP.client.desiredChannelId%3Anull%7D%3BPlayer.sampleRate%3D0%2CPlayer.on(%22fileLoaded%22%2C(function()%7BstopLoadingMusic()%7D))%2CPlayer.on(%22playing%22%2C(function(e)%7BcurrentSongEventsPlayed%3DPlayer.eventsPlayed()%2Cpaused%7C%7Cstopped%7C%7CMPP.client.preventsPlaying()%26%26pause()%7D))%2CPlayer.on(%22midiEvent%22%2C(function(e)%7Bif(!percussionOption%26%26e.channel%3D%3DPERCUSSION_CHANNELS%5B0%5D)return%3Blet%20t%3De.name%2Cn%3Dexists(e.noteNumber)%26%26e.noteNumber%3E%3D21%26%26e.noteNumber%3C%3D108%3Fe.noteNumber%3Anull%2Co%3Dn%3Fn-21%3A-1%3B%22Note%20on%22%3D%3Dt%26%26e.velocity%3F(MPP.press(mppPianoNotes%5Bo%5D%2Ce.velocity%2F127)%2CmppNoteBank%5Bn%5D%2B%2B)%3A%22Note%20off%22%3D%3Dt%7C%7C%22Note%20on%22%3D%3Dt%26%26!e.velocity%3F(sustainOption%26%26mppNoteBank%5Bn%5D%3C%3D1%26%26MPP.release(mppPianoNotes%5Bo%5D)%2CmppNoteBank%5Bn%5D--)%3A%22Controller%20Change%22%3D%3Dt%26%26sustainOption%26%26(64%3D%3De.noteNumber%3Fe.velocity%3E%3D64%3FMPP.pressSustain()%3AMPP.releaseSustain()%3A121%3D%3De.noteNumber%26%26MPP.releaseSustain())%7D))%2CPlayer.on(%22endOfFile%22%2C(function()%7Bended%3D!0%2CrepeatOption%26%26!stopped%26%26exists(currentSongName)%26%26exists(currentSongData)%3FsetTimeout((function()%7BplaySong(currentSongName%2CcurrentSongData)%7D)%2C500)%3AplayerStop()%7D))%2CMPP.client.on(%22a%22%2C(function(e)%7Blet%20t%3DMPP.client.getOwnParticipant()%2Cn%3Dt._id%2Co%3D(t.name%2Ce.a.trim())%2Ci%3De.p%2Cs%3Di.name%2Ca%3Di._id%3Bif(a%3D%3Dn%26%26pinging%26%26o%3D%3DPRE_PING%26%26(pinging%3D!1%2CpingTime%3DDate.now()-pingTime%2CmppChatSend(PRE_MSG%2B%22%20%22%2BpingTime%2B%22ms%22%2CchatDelay))%2Co.startsWith(%22mp!%22))%7Bif(BANNED_PLAYERS.length%3E0)for(let%20e%3D0%3Be%3CBANNED_PLAYERS.length%3B%2B%2Be)if(BANNED_PLAYERS%5Be%5D%3D%3Da)return%20void%20playerLimited(s)%3Bif(LIMITED_PLAYERS.length%3E0)for(let%20e%3D0%3Be%3CLIMITED_PLAYERS.length%3B%2B%2Be)if(LIMITED_PLAYERS%5Be%5D%3D%3Da)return%20void%20playerLimited(s)%3Blet%20e%3Do.substring(3).trim()%2Ct%3De.indexOf(%22%20%22)%2Ci%3D-1!%3Dt%3Fe.substring(0%2Ct)%3Ae%2Cl%3D-1!%3Dt%3Fe.substring(t%2B1).trim()%3Anull%2Cr%3Da%3D%3Dn%2Cp%3DMPP.client.preventsPlaying()%3Bswitch(i.toLowerCase())%7Bcase%22help%22%3Acase%22h%22%3A!r%26%26!publicOption%7C%7Cp%7C%7Chelp(l%2Ca%2Cn)%3Bbreak%3Bcase%22about%22%3Acase%22ab%22%3A!r%26%26!publicOption%7C%7Cp%7C%7Cabout()%3Bbreak%3Bcase%22link%22%3Acase%22li%22%3A!r%26%26!publicOption%7C%7Cp%7C%7Clink()%3Bbreak%3Bcase%22feedback%22%3Acase%22fb%22%3A(r%7C%7CpublicOption)%26%26feedback()%3Bbreak%3Bcase%22ping%22%3Acase%22pi%22%3A(r%7C%7CpublicOption)%26%26ping()%3Bbreak%3Bcase%22play%22%3Acase%22p%22%3A!r%26%26!publicOption%7C%7Cp%7C%7Cplay(l)%3Bbreak%3Bcase%22stop%22%3Acase%22s%22%3A!r%26%26!publicOption%7C%7Cp%7C%7Cstop()%3Bbreak%3Bcase%22pause%22%3Acase%22pa%22%3A!r%26%26!publicOption%7C%7Cp%7C%7Cpause()%3Bbreak%3Bcase%22resume%22%3Acase%22r%22%3A!r%26%26!publicOption%7C%7Cp%7C%7Cresume()%3Bbreak%3Bcase%22song%22%3Acase%22so%22%3A!r%26%26!publicOption%7C%7Cp%7C%7Csong()%3Bbreak%3Bcase%22repeat%22%3Acase%22re%22%3A!r%26%26!publicOption%7C%7Cp%7C%7Crepeat()%3Bbreak%3Bcase%22sustain%22%3Acase%22ss%22%3A!r%26%26!publicOption%7C%7Cp%7C%7Csustain()%3Bbreak%3Bcase%22percussion%22%3Acase%22pe%22%3A!r%26%26!publicOption%7C%7Cp%7C%7Cpercussion()%3Bbreak%3Bcase%22loading%22%3Acase%22lo%22%3Aloading(a%2Cn)%3Bbreak%3Bcase%22public%22%3ApublicCommands(a%2Cn)%7D%7D%7D))%2CMPP.client.on(%22ch%22%2C(function(e)%7Blet%20t%3DmppGetRoom()%3BcurrentRoom!%3Dt%26%26(currentRoom%3Dt%2CMPP.client.isOwner()%7C%7C-1!%3DcurrentRoom.toUpperCase().indexOf(%22MIDI%22)%7C%7Cended%7C%7CstopSong(!0))%7D))%2CMPP.client.on(%22nq%22%2C(function(e)%7BchatDelay%3DMPP.client.isOwner()%3F500%3A2e3%7D))%2CMPP.client.on(%22p%22%2C(function(e)%7Blet%20t%3De._id%3Bif(BANNED_PLAYERS.length%3E0)for(let%20e%3D0%3Be%3CBANNED_PLAYERS.length%3B%2B%2Be)%7Blet%20n%3DBANNED_PLAYERS%5Be%5D%3Bt%3D%3Dn%26%26MPP.client.sendArray(%5B%7Bm%3A%22kickban%22%2C_id%3An%2Cms%3A36e5%7D%5D)%7D%7D))%3Blet%20repeatingTasks%3DsetInterval((function()%7Bif(!MPP.client.preventsPlaying())%7Bif(!ended%26%26exists(currentSongName)%26%26%22%22!%3DcurrentSongName)%7Blet%20e%3DgetElapsedProgressInt(26%2CcurrentSongEventsPlayed%2CcurrentSongTotalEvents)%3Bif(e!%3DcurrentSongProgress%26%26(currentSongProgress%3De%2CcurrentSongProgress%3E%3D0%26%26currentSongProgress%3C%3D26))%7BelapsingProgressNotification%26%26(elapsingProgressNotification.close()%2CelapsingProgressNotification%3Dnull)%3Blet%20e%3D'style%3D%22color%3A%20'%2B(MPP.client.user%26%26MPP.client.user.color%3FMPP.client.user.color%3A%22%230F0%22)%2B'%20!important%22'%2Ct%3DgetElapsingProgress(26%2CcurrentSongEventsPlayed%2CcurrentSongTotalEvents)%3BelapsingProgressNotification%3DmppNotificationSend(%7Bhtml%3A'%3Cdiv%20class%3D%22title%22%20style%3D%22display%3A%20block%20!important%22%3E%3Ccode%20class%3D%22markdown%22%3E%E3%80%8C%3Cspan%20'%2Be%2B%22%3E%22%2Bt%2B'%3C%2Fspan%3E%E3%80%8D%3C%2Fcode%3E%3Cspan%3E%20%E2%80%89%3C%2Fspan%3E%3C%2Fdiv%3E%3Cdiv%20class%3D%22text%22%3EFile%3A%20%3Ccode%20class%3D%22markdown%22%20'%2Be%2B%22%3E%22%2BcurrentSongName%2B%22%3C%2Fcode%3E%3C%2Fdiv%3E%22%2Cduration%3A-1%2Cclass%3A%22short%22%7D)%7D!paused%26%26exists(MPP.noteQuota)%26%26exists(MPP.noteQuota.history)%26%26!MPP.noteQuota.history%5B0%5D%26%26pause(!0)%7DfinishedSongName%26%26(elapsingProgressNotification%26%26(elapsingProgressNotification.close()%2CelapsingProgressNotification%3Dnull)%2CmppChatSend(PRE_MSG%2B%22%20%60%22%2B%22%E3%80%8C%E2%80%89Done%20playing%E2%80%89%E2%80%89%E3%80%8D%60%20%E2%80%94%E2%9E%A4%20%60%22%2BfinishedSongName%2B%22%60%22)%2CfinishedSongName%3Dnull)%7D%7D)%2C1)%2CdynamicButtonDisplacement%3DsetInterval((function()%7Bif(mppDynamicButtons)return%20void%20clearInterval(dynamicButtonDisplacement)%3Blet%20e%3D%5B%5D%3Bif(%5B...document.querySelectorAll(QUERY_BOTTOM_UGLY_BTNS)%5D.forEach((t%3D%3E%7B(t.offsetWidth%3E0%7C%7Ct.offsetHeight%3E0%7C%7Ct.getClientRects().length%3E0)%26%26e.push(t)%7D))%2C!e%7C%7C!e.length)return%3Blet%20t%3De%5B0%5D.offsetTop%2Cn%3De%5B0%5D.offsetTop%2Co%3De%5B0%5D.offsetTop%2Ci%3De%5B0%5D.offsetTop%3Bfor(let%20s%3D1%3Bs%3Ce.length%3Bs%2B%2B)%7Blet%20a%3De%5Bs%5D%3Ba.style.position%7C%7C(a.offsetTop%3En%3Fn%3Da.offsetTop%3Aa.offsetTop%3Ct%26%26(t%3Da.offsetTop))%2Ca.offsetTop%3En%3Fi%3Da.offsetTop%3Aa.offsetTop%3Ct%26%26(o%3Da.offsetTop)%7Dlet%20s%3D%5B%5D%2Ca%3D%5B%5D%2Cl%3D%5B%5D%2Cr%3D%5B%5D%3Be.forEach((e%3D%3E%7Be.offsetTop%3D%3Dt%26%26s.push(e)%2Ce.offsetTop%3D%3Dn%26%26a.push(e)%2Ce.offsetTop!%3Dt%26%26e.offsetTop!%3Dt%7C%7Cl.push(e)%2Ce.offsetTop!%3Dn%26%26e.offsetTop!%3Dn%7C%7Cr.push(e)%7D))%3Blet%20p%3Dl.reduce(((e%2Ct)%3D%3Ee.offsetLeft%3Et.offsetLeft%3Fe%3At))%2Cc%3Dr.reduce(((e%2Ct)%3D%3Ee.offsetLeft%3Et.offsetLeft%3Fe%3At))%2Cd%3Dp%3Bp.offsetLeft%3Cc.offsetLeft%26%26(d%3Dc)%3Blet%20u%3De%5B1%5D.offsetLeft-e%5B0%5D.offsetLeft%2Cm%3Dn-t%2Cf%3Dp.offsetLeft%3D%3Dc.offsetLeft%3Fd.offsetLeft%2Bu%3Ad.offsetLeft%2Cg%3Dt%2CP%3Dg%2B(p.offsetLeft%3Ec.offsetLeft%3Fm%3A0)%3Bdocument.documentElement.style.setProperty(%22--xDisplacement%22%2Cu%2B%22px%22)%2Cdocument.documentElement.style.setProperty(%22--yDisplacement%22%2Cm%2B%22px%22)%2Cdocument.documentElement.style.setProperty(%22--xInitial%22%2Cf%2B%22px%22)%2Cdocument.documentElement.style.setProperty(%22--yInitial%22%2Cg%2B%22px%22)%2Cdocument.documentElement.style.setProperty(%22--yToggleInitial%22%2CP%2B%22px%22)%7D)%2C100)%2CslowRepeatingTasks%3DsetInterval((function()%7Bif(!pageVisible)%7Blet%20e%3DMPP.piano.keys%5B%22a-1%22%5D.note%2Ct%3DMPP.client.getOwnParticipant().id%3BMPP.piano.audio.play(e%2C.001%2C0%2Ct)%2CMPP.piano.audio.stop(e%2C0%2Ct)%7D%7D)%2C500)%2CtriedClickingPlayButton%3D!1%2CplayButtonMaxAttempts%3D10%2CplayButtonCheckCounter%3D0%2CclearSoundWarning%3DsetInterval((function()%7Blet%20e%3Ddocument.querySelector('%23motd%20%3E%20button%5Bi18next-orgval-0%3D%22PLAY%22%5D')%7C%7Cdocument.querySelector(%22%23sound-warning%20button%22)%2Ct%3Dexists(e)%3Fwindow.getComputedStyle(e)%3Anull%3B!!exists(t)%26%26(%22block%22%3D%3Dt.display%26%26%22auto%22!%3Dt.height)%7C%7CplayButtonCheckCounter%3E%3DplayButtonMaxAttempts%3F(clearInterval(clearSoundWarning)%2Cexists(e)%26%26%22block%22%3D%3Dt.display%26%26%221%22%3D%3Dt.opacity%26%26(e.click()%2CsetTimeout((function()%7BtriedClickingPlayButton%3D!0%7D)%2C500)))%3AplayButtonCheckCounter%2B%2B%7D)%2C250)%2CwaitForMPP%3DsetInterval((function()%7Bif(exists(MPP)%26%26exists(MPP.client)%26%26exists(MPP.piano)%26%26exists(MPP.piano.keys)%26%26mppGetRoom()%26%26triedClickingPlayButton)%7BclearInterval(waitForMPP)%2CmppDynamicButtons%3Ddocument.querySelector(MPP_DYNAMIC_BUTTONS_SELECTOR)%2CcurrentRoom%3DmppGetRoom()%2CcurrentRoom.toUpperCase().indexOf(%22MIDI%22)%2Cexists(MPP.Notification)%7C%7C(MPP.Notification%3Dfunction(e)%7Bif(this%20instanceof%20MPP.Notification%3D%3D0)throw%22yeet%22%3BEventEmitter.call(this)%2Ce%3De%7C%7C%7B%7D%2Cthis.id%3D%22Notification-%22%2B(e.id%7C%7CMath.random())%2Cthis.title%3De.title%7C%7C%22%22%2Cthis.text%3De.text%7C%7C%22%22%2Cthis.html%3De.html%7C%7C%22%22%2Cthis.target%3D%24(e.target%7C%7C%22%23piano%22)%2Cthis.duration%3De.duration%7C%7C3e4%2Cthis.class%3De.class%7C%7C%22classic%22%3Bvar%20t%3Dthis%2Cn%3D%24(%22%23%22%2Bthis.id)%3Breturn%20n.length%3E0%26%26n.remove()%2Cthis.domElement%3D%24('%3Cdiv%20class%3D%22notification%22%3E%3Cdiv%20class%3D%22notification-body%22%3E%3Cdiv%20class%3D%22title%22%3E%3C%2Fdiv%3E%3Cdiv%20class%3D%22text%22%3E%3C%2Fdiv%3E%3C%2Fdiv%3E%3Cdiv%20class%3D%22x%22%3EX%3C%2Fdiv%3E%3C%2Fdiv%3E')%2Cthis.domElement%5B0%5D.id%3Dthis.id%2Cthis.domElement.addClass(this.class)%2Cthis.domElement.find(%22.title%22).text(this.title)%2Cthis.text.length%3E0%3Fthis.domElement.find(%22.text%22).text(this.text)%3Athis.html%20instanceof%20HTMLElement%3Fthis.domElement.find(%22.text%22)%5B0%5D.appendChild(this.html)%3Athis.html.length%3E0%26%26this.domElement.find(%22.text%22).html(this.html)%2Cdocument.body.appendChild(this.domElement.get(0))%2Cthis.position()%2Cthis.onresize%3Dfunction()%7Bt.position()%7D%2Cwindow.addEventListener(%22resize%22%2Cthis.onresize)%2Cthis.domElement.find(%22.x%22).click((function()%7Bt.close()%7D))%2Cthis.duration%3E0%26%26setTimeout((function()%7Bt.close()%7D)%2Cthis.duration)%2Cthis%7D%2Cmixin(MPP.Notification.prototype%2CEventEmitter.prototype)%2CMPP.Notification.prototype.constructor%3DMPP.Notification%2CMPP.Notification.prototype.position%3Dfunction()%7Bvar%20e%3Dthis.target.offset()%2Ct%3De.left-this.domElement.width()%2F2%2Bthis.target.width()%2F4%2Cn%3De.top-this.domElement.height()-8%2Co%3Dthis.domElement.width()%3Bt%2Bo%3E%24(%22body%22).width()%26%26(t-%3Dt%2Bo-%24(%22body%22).width())%2Ct%3C0%26%26(t%3D0)%2Cthis.domElement.offset(%7Bleft%3At%2Ctop%3An%7D)%7D%2CMPP.Notification.prototype.close%3Dfunction()%7Bvar%20e%3Dthis%3Bwindow.removeEventListener(%22resize%22%2Cthis.onresize)%2Cthis.domElement.fadeOut(500%2C(function()%7Be.domElement.remove()%2Ce.emit(%22close%22)%7D))%7D)%2Cexists(MPP.Notification)%7C%7CmppChatSend(PRE_MSG%2B%22%20This%20version%20of%20Multiplayer%20Piano%20doesn't%20support%20notifications%2C%20please%20check%20console%20for%20the%20notification.%22)%2CmppPianoNotes%3DObject.keys(MPP.piano.keys)%2CmppNoteBank%3DArray.apply(null%2CArray(mppPianoNotes.length)).map((function()%7Breturn%200%7D))%3Blet%20e%3D%22%22%3Bexists(MPP.pressSustain)%7C%7Cexists(MPP.releaseSustain)%7C%7C(e%3D%22Looks%20like%20this%20version%20of%20Multiplayer%20Piano%20is%20incompatible%20with%20this%20mod.%3Cbr%3EThings%20likely%20won't%20work%20as%20expected!%3Cbr%3EAsk%20the%20website%20owner%20if%20they%20can%20update%20their%20version%20of%20Multiplayer%20Piano.%3Cbr%3E%3Cbr%3E%22)%2CcreateWebpageElements()%2Cconsole.log(PRE_MSG%2B%22%20Online!%22)%3Blet%20t%3D%22mppclone.com%22%2Cn%3D%22www.multiplayerpiano.org%22%2Co%3D%22multiplayerpiano.com%22%2Ci%3D%22%22%3Bwindow.location.hostname%3D%3Do%26%26(i%3D%22It%20looks%20like%20you're%20on%20%60%22%2Bo%2B%22%60%2C%20please%20consider%20switching%20over%20to%20one%20of%20the%20official%2C%20AD-free%20websites%20below%3A%3Cbr%3E%22%2B%60%20%E2%80%A2%20%20%3Ca%20href%3D%22https%3A%2F%2F%24%7Bt%7D%2F%22%3E%24%7Bt%7D%3C%2Fa%3E%20(main%20website)%3Cbr%3E%60%2B%60%20%E2%80%A2%20%20%3Ca%20href%3D%22https%3A%2F%2F%24%7Bn%7D%2F%22%3E%24%7Bn%7D%3C%2Fa%3E%20(mirror%20website)%3Cbr%3E%3Cbr%3E%60)%3Blet%20s%3DsetInterval((function()%7Bif(latestVersion)%7BclearInterval(s)%3Blet%20t%3D15e3%2Cn%3D%22%22%3Bif(-1!%3DlatestVersion%26%26latestVersion!%3DVERSION)%7Blet%20e%3D%2F%5B0-9.%5D%2B%2Fg%3BparseInt(latestVersion.match(e)%5B0%5D.replaceAll(%22.%22%2C%22%22))%3EparseInt(VERSION.match(e)%5B0%5D.replaceAll(%22.%22%2C%22%22))%26%26(t%3D-1%2Cn%3D%60New%20version%20available%3A%20%3Ccode%20class%3D%22markdown%22%20style%3D%22color%3A%20%230F0%20!important%22%3Ev%24%7BlatestVersion%7D%3C%2Fcode%3E%3Cbr%3E%3Cbr%3EPlease%20check%20the%20website!%3Cbr%3E%3Ca%20target%3D%22_blank%22%20href%3D%22%24%7BSUPPORT_URL%7D%22%3E%60%2BSUPPORT_URL%2B%22%3C%2Fa%3E%3Cbr%3E%3Cbr%3E%22)%7Dlet%20o%3DmppNotificationSend(%7Btarget%3A%22%23%22%2BTOGGLER_ELEMENT_ID%2Ctitle%3AMOD_DISPLAYNAME%2B%22%20%5Bv%22%2B%223.9.99%5D%22%2Chtml%3Ai%2Be%2Bn%2B%60Mod%20created%20by%20%3Ca%20target%3D%22_blank%22%20href%3D%22%24%7BNAMESPACE%7D%22%3E%24%7BAUTHOR%7D%3C%2Fa%3E%2C%20thanks%20for%20using%20it!%3Cbr%3E%3Cbr%3ETry%20dragging%20a%20MIDI%20onto%20the%20screen%2C%20or%20click%20the%20button%20below%20to%20find%20and%20use%20the%20%3Cb%3EOpen%3C%2Fb%3E%20button%2C%20to%20start%20playing%20MIDI%20files!%3Cbr%3E%3Cbr%3EIf%20you%20need%20any%20help%20using%20the%20mod%2C%20try%20using%20the%20command%3A%3Cbr%3E%20%E2%80%A2%20%20%3Ccode%20class%3D%22markdown%22%20style%3D%22color%3A%20%230F0%20!important%22%3Emp!help%3C%2Fcode%3E%60%2Cduration%3At%7D)%3BsetTimeout((function()%7Bo.position()%7D)%2C100)%7D%7D)%2C100)%7D%7D)%2C100)%7D)()